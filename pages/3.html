<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8">
    <title>Auth0 B2B SaaS Lab</title>
    <link rel="stylesheet" href="/static/index.css">
</head>

<body>
    <header>
        <h1>Welcome to the Auth0 B2B SaaS Lab!</h1>
        <div class="sub">
            <h3><i>Module: Enabling Business Login</i></h3>
            <p>Powered by Auth0</p>
            <a href="/">Back to Overview</a>
        </div>
    </header>

    <section id="overview">
        Now that individual users can access the service, we have to think about bringing in our corporate users. Pizza0 already could win their first customer who provide their own Identity provider. You are asked to enable users from that organization to log
        into Pizza0 using Single Sign On.
    </section>
    <section id="auth0" class="list">
        <div class="number">
            0
        </div>
        <div class="content">
            For this lab we are providing sample organizations running on the Okta service. In order to create your organization visit <a href="https://okta-saas-lab-org-creator.herokuapp.com" target="_blank">https://okta-saas-lab-org-creator.herokuapp.com</a>. Here you will need to provide some information:
            <ul>
                <li>Auth0 Tenant Name: This is the name of your own Auth0 tenant you are using at the moment. You can also find the name by going to <a href="https://manage.auth0.com">manage.auth0.com</a>/dashboard/<b>region</b>/<b>tenant-name</b></li>
                <li>A name for your organization: Use the naming scheme <i>your-name</i>-workshop or similar unique names to avoid conflict with other lab participants</li>
                <li>Email address: You can use any email address, though we recommend using an @example.com email, e.g. <i>your-name@example.com</i>.</li>
                <li>First and last name are optional and can be entered if you want to see that this information will be transferred to Auth0 later on as well</li>
            </ul> 
            Once you have entered your detail, you should receive a password for your user as well as a client ID that you can use to set up the SSO connection. Please note both as we will need it throughout the lab
            to login into Okta.
        </div>
    </section>
    <section id="auth0" class="list">
        <div class="number">
            1
        </div>
        <div class="content">
            In order to let the newly created organization sign into our application, you have to register it as a new OpenID Connect (OIDC) enterprise connection. To do so, go to Authentication --> Enterprise --> Open ID connect in the Auth0 Dasboard and click create
            connection. Enter a connection name (this can be anything) and copy the Issuer URL and ClientID from the organisation you just created. Click on "Create" to complete the setup.
        </div>
    </section>
    <section id="auth0" class="list">
        <div class="number">
            2
        </div>
        <div class="content">
            To make sure users are actually redirected to your new organization, click on "Login Experience" in your newly created connection. Add the domain of your newly created user into the "Identity Provider Domains" (e.g. example.com if your user was called
            test@example.com) and click on "Save" on the bottom of the page. Lastly, go to "Applications" and make sure your connection is enabled for your Pizza0 application.
        </div>
    </section>
    <section id="auth0" class="list">
        <div class="number">
            3
        </div>
        <div class="content">
            Log into your application again (by clicking the login button). When you enter your newly created user now (e.g. test@example.com), you should be redirected to your newly created organization and be able to sign in with the
            credentials that you received when registering the organization.
        </div>
    </section>
    <section id="auth0" class="list">
        <div class="number">
            4
        </div>
        <div class="content">
            Auth0 has a native concept of Organizations that makes it easier for you as a developer to organize and manage all your business customers and their login into your solution. To create an organization, go to "Organizations" in the sidebar of the Auth0
            Dashboard and click on "Create Organization". Give it an easy to remember name (users will need it when signing into your app) and click "Add Organization.
        </div>
    </section>
    <section id="auth0" class="list">
        <div class="number">
            5
        </div>
        <div class="content">
            Next, you need to enable the OIDC connection you just created in the new organization. In your organization, go to "Connections" -> "Enable Connections". Find the connection you have previously created and click "Enable Connection". In the next window,
            click on "Enable Auto-Membership" and "Save". This means that users who will access your app through this connection will automatically be part of your organization.
        </div>
    </section>
    <section id="auth0" class="list">
        <div class="number">
            6
        </div>
        <div class="content">
            Lastly, we need to let our Pizza0 application know that we expect business users to sign in instead of everyday end users. Find your application by navigating to "Applications" -> "Applications" in the Auth0 Dashboard and click on the application you
            have registered previously. In the following window you will find a tab called "Organizations". Navigate to that, enable the Display Organization Prompt and set the dropdown to "Team members of organizations".
            <br><br> Note: Eventually the option to enable organizations will be greyed out. There will be a warning box that some login grants have to be disabled first. Click on "Disable Grants Now" and proceed.
        </div>
    </section>
    <section id="auth0" class="list">
        <div class="number">
            7
        </div>
        <div class="content">
            Return to your Pizza0 site and click on login. You will now be asked to enter your organizations name (which is the one you gave to your organization when you registered it). The login will automatically redirect you to your Identity Provider (aka Okta
            if you follow the lab), where you can sign in with your users credentials. After successful login you should now have an organization ID displayed in the header of the Pizza0 site.
        </div>
    </section>
    <section id="cta">
        Congratulations, you can now start your successful B2B business! By completing these steps we now can safely integrate our business customers into our application and even make sure to keep track of them through organizations. Under the hood, this brings
        a lot of value: Your customers admins can still provision / deprovision users, control who has access to your app, and see how frequently your app is used. And you just saved a few days of building your own OpenID Connect integration! If you are
        doing this lab in a guided class, please wait for your instructor to continue the course. Otherwise, you may proceed to the next lab to see how you can give your application a lot more information about our users.
        <a href="/module-4" class="next-lab">To the next lab</a>
    </section>
</body>

</html>